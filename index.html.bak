<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ç›´è˜-H5åŸå‹</title>
    <style>
        /* CSS Variables - The New Visual Identity */
        :root {
            --primary-color: #3182CE; /* A more professional blue */
            --primary-light: #EBF8FF;
            --accent-color: #DD6B20; /* For salaries and highlights */
            --text-primary: #2D3748;
            --text-secondary: #718096;
            --background-color: #F7FAFC;
            --card-background: #FFFFFF;
            --border-color: #E2E8F0;
            --danger-color: #E53E3E;
            --success-color: #38A169;
        }

        /* Global Reset & Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent; /* Remove tap highlight on mobile */
        }
        html, body {
            height: 100%;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--background-color);
            color: var(--text-primary);
            font-size: 16px;
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Page Container */
        .page {
            display: none;
            flex-direction: column;
            height: 100%;
            width: 100%;
            position: absolute;
            top: 0;
            left: 0;
            background-color: var(--background-color);
        }
        .page.active {
            display: flex;
        }

        /* --- STAGE 1: MAIN PAGE BEAUTIFICATION --- */

        /* Header & Tabs */
        #main-page header {
            background-color: var(--card-background);
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            width: 100%;
            z-index: 100;
        }
        .tabs {
            display: flex;
            justify-content: space-around;
            position: relative;
        }
        .tab-button {
            padding: 10px 15px;
            background-color: transparent;
            color: var(--text-secondary);
            border: none;
            cursor: pointer;
            font-size: 1em;
            font-weight: 500;
            position: relative;
            transition: color 0.3s;
        }
        .tab-button.active {
            color: var(--primary-color);
            font-weight: 600;
        }
        .tab-button::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 3px;
            background-color: var(--primary-color);
            border-radius: 2px;
            transition: width 0.3s ease-in-out;
        }
        .tab-button.active::after {
            width: 40%;
        }

        /* Main Content Area */
        main {
            flex-grow: 1;
            overflow-y: auto;
            padding: 20px 15px;
        }
        .content-view {
            display: none;
        }
        .content-view.active {
            display: block;
        }

        /* Card Base Style */
        .card, .plaza-card {
            background-color: var(--card-background);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid var(--border-color);
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.05);
            transition: box-shadow 0.3s, transform 0.2s;
        }
        .card:active, .plaza-card:active {
             transform: scale(0.98);
             box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.1);
        }

        /* Job/Talent Card Specifics */
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }
        .card-title {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--text-primary);
        }
        .card-salary {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--accent-color);
            flex-shrink: 0;
            margin-left: 10px;
        }
        .card-company, .card-meta {
            font-size: 0.9em;
            color: var(--text-secondary);
            margin-bottom: 15px;
        }
        .card-tags, .plaza-card .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        .card-tags .tag, .plaza-card .tags .tag {
            background-color: var(--primary-light);
            color: var(--primary-color);
            font-weight: 500;
            font-size: 0.8em;
            padding: 4px 10px;
            border-radius: 20px;
        }
        
        /* Plaza Card Specifics */
        .plaza-card .name {
            font-weight: 600;
            font-size: 1.1em;
            margin-bottom: 8px;
        }
        .plaza-card .text {
            line-height: 1.6;
            margin-bottom: 15px;
            color: var(--text-primary);
        }
        .plaza-card .actions {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 25px;
        }
        .plaza-card .actions .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9em;
        }
        .plaza-card .actions .action-btn .icon {
            font-size: 1.2em;
        }
        .plaza-card .actions .action-btn.liked .icon {
            color: var(--danger-color);
        }

        /* FAB (Floating Action Button) */
        .fab {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 55px;
            height: 55px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 50%;
            border: none;
            font-size: 36px;
            line-height: 55px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            cursor: pointer;
            z-index: 1001;
            display: none; /* Controlled by JS */
            transition: transform 0.2s;
        }
        .fab:active {
            transform: scale(0.9);
        }

        /* --- STAGE 2: DETAIL PAGE BEAUTIFICATION --- */

        /* Detail Page Header */
        .detail-header {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            background-color: var(--card-background);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 101;
        }
        .detail-header .back-button {
            font-size: 1.5em; /* Larger tap target */
            color: var(--text-secondary);
            text-decoration: none;
            margin-right: 10px;
            padding: 5px;
        }
        .detail-header .title {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Detail Page Content Area */
        .detail-content {
            padding: 20px 15px;
            background-color: var(--background-color);
        }
        
        /* The header card inside the detail content */
        .detail-card-header {
            background-color: var(--card-background);
            border-radius: 12px;
            padding: 20px;
            margin: -5px 0 20px 0; /* Pull up slightly to overlap with padding */
            border: 1px solid var(--border-color);
        }
        .detail-card-header .title {
            font-size: 1.4em;
            font-weight: 600;
            margin-bottom: 8px;
        }
        .detail-card-header .salary {
            font-size: 1.2em;
            font-weight: 600;
            color: var(--accent-color);
            margin-bottom: 12px;
        }
        .detail-card-header .meta {
            font-size: 0.9em;
            color: var(--text-secondary);
        }
        .detail-card-header .tags {
            margin-top: 15px;
        }
        .detail-card-header .tags .tag {
             background-color: var(--primary-light);
            color: var(--primary-color);
            font-weight: 500;
            font-size: 0.8em;
            padding: 4px 10px;
            border-radius: 20px;
        }

        /* Content Sections (e.g., "èŒä½æè¿°") */
        .detail-section {
            background-color: var(--card-background);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid var(--border-color);
        }
        .detail-section h2 {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
        }
        .detail-section p, .detail-section ul {
            font-size: 1em;
            line-height: 1.7;
            color: var(--text-primary);
        }
        .detail-section ul {
            padding-left: 20px;
        }
        
        /* Sticky Footer with Actions */
        .detail-footer {
            position: sticky;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: var(--card-background);
            padding: 12px 20px;
            padding-bottom: calc(12px + env(safe-area-inset-bottom));
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
            display: flex;
            gap: 15px;
            z-index: 102;
            border-top: 1px solid var(--border-color);
        }
        .btn-action {
            flex-grow: 1;
            padding: 12px;
            font-size: 1em;
            font-weight: 600;
            border-radius: 8px;
            border: 1px solid var(--primary-color);
            background-color: var(--primary-light);
            color: var(--primary-color);
            cursor: pointer;
            transition: background-color 0.2s, transform 0.2s;
        }
        .btn-action:active {
             transform: scale(0.97);
        }
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }
        .btn-primary:active {
             transform: scale(0.97);
        }

        /* --- STAGE 3: FORM & MODAL BEAUTIFICATION --- */

        /* Login, Profile Completion, and Post Pages */
        #login-page, #complete-profile-page, #post-page {
            background-color: var(--card-background);
        }
        
        /* General Form Styling */
        .form-container, .profile-form-container {
            width: 100%;
            max-width: 400px;
            padding: 20px;
            margin: 0 auto;
        }

        #login-page h1, #complete-profile-page h1 {
            font-size: 1.8em;
            font-weight: 600;
            text-align: center;
            margin-bottom: 30px;
            color: var(--text-primary);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .form-group input[type="text"],
        .form-group input[type="password"],
        .form-group input[type="tel"],
        .form-group input[type="number"],
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            font-size: 1em;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            background-color: var(--background-color);
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .form-group input:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px var(--primary-light);
        }

        .form-group textarea {
            height: 120px;
            resize: vertical;
        }
        
        /* Buttons */
        .btn-submit, .btn-login {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 8px;
            background-color: var(--primary-color);
            color: white;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.2s;
        }
        .btn-submit:active, .btn-login:active {
            transform: scale(0.98);
            background-color: #2B6CB0; /* Darker blue */
        }

        /* Specific Page Adjustments */
        #login-page .form-toggle-link {
            margin-top: 25px;
            text-align: center;
            font-size: 0.9em;
            color: var(--primary-color);
            cursor: pointer;
            text-decoration: underline;
        }
         #login-page .terms {
            font-size: 0.8em;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 20px;
            line-height: 1.4;
        }
         #login-page .terms a {
            color: var(--primary-color);
            text-decoration: none;
        }
        .avatar-uploader {
            margin-bottom: 30px;
        }
        .avatar-placeholder {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            background-color: var(--primary-light);
            color: var(--primary-color);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.2em;
            margin: 0 auto 10px;
            cursor: pointer;
            border: 2px dashed var(--primary-color);
        }
        .avatar-uploader p {
            font-size: 0.9em;
            color: var(--text-secondary);
        }
        
        /* Modal Action Sheet */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(45, 55, 72, 0.6);
            display: none; /* Hidden by default */
            justify-content: center;
            align-items: flex-end;
            z-index: 1002;
            transition: opacity 0.2s;
        }
        .modal-overlay.show {
            display: flex;
        }
        .action-sheet {
            width: 100%;
            background: var(--background-color);
            border-top-left-radius: 16px;
            border-top-right-radius: 16px;
            padding: 10px;
            padding-bottom: calc(10px + env(safe-area-inset-bottom));
            transform: translateY(0);
            transition: transform 0.25s ease-out;
        }
        .action-sheet button {
            display: block;
            width: 100%;
            padding: 16px;
            background: var(--card-background);
            border: none;
            border-radius: 12px;
            font-size: 1.1em;
            margin-bottom: 8px;
            cursor: pointer;
            color: var(--text-primary);
            font-weight: 500;
        }
        .action-sheet button.cancel {
            margin-top: 10px;
            margin-bottom: 0;
            color: var(--danger-color);
            font-weight: 600;
        }
        .action-sheet button:active {
            background-color: #EDF2F7; /* A light gray for tap feedback */
        }

        /* Back to Top Button remains the same */
        .btn-back-to-top {
            display: none;
            position: fixed;
            bottom: 80px; /* Adjust to avoid footer bar on detail pages */
            right: 20px;
            width: 45px;
            height: 45px;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 20px;
            text-align: center;
            line-height: 45px;
            cursor: pointer;
            z-index: 1000;
        }
        .btn-back-to-top.show {
            display: block;
        }
        .inline-comment-section { /* Old comment styles */
            display: none;
        }
        .comment-container {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #f0f0f0;
        }
        .comment-list-inline .comment-item-inline {
            font-size: 0.9em;
            margin-bottom: 8px;
        }
        .comment-item-inline .comment-user-inline {
            font-weight: bold;
            color: #007aff;
            margin-right: 5px;
        }
        .comment-item-inline .comment-text-inline {
            color: #555;
        }
        .view-more-comments {
            background: none;
            border: none;
            color: #888;
            cursor: pointer;
            font-size: 0.9em;
            padding: 5px 0;
            margin-bottom: 10px;
        }
        .comment-form-inline {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        .comment-form-inline .comment-inline-input {
            flex-grow: 1;
            border: 1px solid #ddd;
            background-color: #f7f7f7;
            border-radius: 15px;
            padding: 8px 12px;
            font-size: 0.9em;
        }
        .comment-form-inline .btn-post-inline-comment {
             flex-shrink: 0;
             border: none;
             background-color: #007aff;
             color: white;
             border-radius: 15px;
             padding: 8px 15px;
             font-size: 0.9em;
             cursor: pointer;
        }
        .plaza-card .actions .action-btn.liked .icon {
            color: var(--danger-color);
        }

    </style>
</head>
<body>

    <!-- Page 1: Login/Register (now for on-demand use) -->
    <section id="login-page" class="page">
        <div class="login-container">
            <!-- Back button functionality will be context-dependent -->
            <a href="#" id="back-from-login" class="back-link">&lt; è¿”å›</a>
            <h1 id="login-title">æ‰‹æœºå·ç™»å½•</h1>
            <div class="input-group">
                <input type="tel" id="phone-input" placeholder="è¯·è¾“å…¥æ‰‹æœºå·" maxlength="11">
            </div>
            <div class="input-group">
                <input type="password" id="password-input" placeholder="è¯·è¾“å…¥å¯†ç ">
            </div>
            <div class="input-group" id="confirm-password-group" style="display: none;">
                <input type="password" id="confirm-password-input" placeholder="è¯·å†æ¬¡è¾“å…¥å¯†ç ">
            </div>
            <button id="btn-auth-action" class="btn-login">ç™»å½•</button>
            <p class="terms" id="login-terms">
                ç™»å½•/æ³¨å†Œå³ä»£è¡¨æ‚¨åŒæ„<a href="#">ã€Šç”¨æˆ·åè®®ã€‹</a>å’Œ<a href="#">ã€Šéšç§æ”¿ç­–ã€‹</a>
            </p>
            <div id="form-toggle-link" class="form-toggle-link" data-mode="login">æ²¡æœ‰è´¦æˆ·ï¼Ÿç«‹å³æ³¨å†Œ</div>
        </div>
    </section>

    <!-- Page 2: Main Application -->
    <section id="main-page" class="page active">
        <header>
            <div class="tabs">
                <button id="tab-jobs" class="tab-button">æ‹›è˜ä¿¡æ¯</button>
                <button id="tab-plaza" class="tab-button">æ‰¾æ´»å¹¿åœº</button>
                <button id="tab-talents" class="tab-button">æ±‚èŒäººæ‰</button>
            </div>
        </header>
        <main>
            <div id="jobs-view" class="content-view">
                <!-- Job listings will be injected here -->
            </div>
            <div id="plaza-view" class="content-view">
                <!-- Plaza posts will be injected here -->
            </div>
            <div id="talents-view" class="content-view">
                <!-- Talent profiles will be injected here -->
            </div>
        </main>
    </section>
    
    <!-- Page 3: Job Detail -->
    <section id="jobDetail-page" class="page">
        <header class="detail-header">
            <a href="#" class="back-button" data-target="main">&lt;</a>
            <span class="title">èŒä½è¯¦æƒ…</span>
        </header>
        <main class="detail-content" id="job-detail-content">
            <!-- Job detail will be injected here -->
        </main>
        <footer class="detail-footer">
            <button class="btn-action" data-action="collect">æ”¶è—</button>
            <button class="btn-action btn-primary" data-action="contact">ç«‹å³æ²Ÿé€š</button>
        </footer>
    </section>

    <!-- Page 4: Talent Detail -->
    <section id="talentDetail-page" class="page">
        <header class="detail-header">
            <a href="#" class="back-button" data-target="main">&lt;</a>
            <span class="title">äººæ‰ä¸»é¡µ</span>
        </header>
        <main class="detail-content" id="talent-detail-content">
            <!-- Talent detail will be injected here -->
        </main>
        <footer class="detail-footer">
            <button class="btn-action" data-action="collect">æ”¶è—</button>
            <button class="btn-action btn-primary" data-action="contact">ç«‹å³æ²Ÿé€š</button>
        </footer>
    </section>

    <!-- Page 5: Post Form -->
    <section id="post-page" class="page">
        <header class="detail-header">
            <a href="#" class="back-button" data-target="main">&lt;</a>
            <span class="title" id="post-page-title">å‘å¸ƒ</span>
        </header>
        <main class="detail-content">
            <div id="post-form-container">
                <!-- Dynamic form fields will be injected here -->
            </div>
        </main>
    </section>

    <!-- Page 6: Complete Profile (after first login) -->
    <section id="complete-profile-page" class="page">
        <div class="profile-form-container">
            <h1>å®Œå–„ä¸ªäººä¿¡æ¯</h1>
            <div class="avatar-uploader">
                <div class="avatar-placeholder">å¤´åƒ</div>
                <p>ç‚¹å‡»è®¾ç½®å¤´åƒ</p>
            </div>
            <div class="form-group" style="text-align: left;">
                <label for="profile-name">æ˜µç§°</label>
                <input type="text" id="profile-name" placeholder="è¯·è¾“å…¥ä½ çš„æ˜µç§°">
            </div>
            <button id="btn-save-profile" class="btn-submit">å®Œæˆï¼Œè¿›å…¥åº”ç”¨</button>
        </div>
    </section>

    <button id="btn-back-to-top" class="btn-back-to-top">â†‘</button>
    <button id="fab-post" class="fab">+</button>

    <div id="post-options-modal" class="modal-overlay">
        <div class="action-sheet">
            <button data-post-type="job">å‘å¸ƒæ‹›è˜</button>
            <button data-post-type="plaza">å‘å¸ƒæ‰¾æ´»ä¿¡æ¯</button>
            <button data-post-type="talent">å®Œå–„æˆ‘çš„ç®€å†</button>
            <button class="cancel" data-action="cancel">å–æ¶ˆ</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Page Elements ---
            const pages = {
                login: document.getElementById('login-page'),
                main: document.getElementById('main-page'),
                jobDetail: document.getElementById('jobDetail-page'),
                talentDetail: document.getElementById('talentDetail-page'),
                post: document.getElementById('post-page'),
                completeProfile: document.getElementById('complete-profile-page'),
            };

            // Login page elements
            const backFromLogin = document.getElementById('back-from-login');
            const phoneInput = document.getElementById('phone-input');
            const passwordInput = document.getElementById('password-input');
            const confirmPasswordGroup = document.getElementById('confirm-password-group');
            const confirmPasswordInput = document.getElementById('confirm-password-input');
            const btnAuthAction = document.getElementById('btn-auth-action');
            const formToggleLink = document.getElementById('form-toggle-link');
            const loginTerms = document.getElementById('login-terms');

            // Main app elements
            const tabJobs = document.getElementById('tab-jobs');
            const tabTalents = document.getElementById('tab-talents');
            const jobsView = document.getElementById('jobs-view');
            const talentsView = document.getElementById('talents-view');
            
            const tabPlaza = document.getElementById('tab-plaza');
            const plazaView = document.getElementById('plaza-view');

            // Detail page elements
            const jobDetailContent = document.getElementById('job-detail-content');
            const talentDetailContent = document.getElementById('talent-detail-content');
            const backToTopButton = document.getElementById('btn-back-to-top');

            // Post feature elements
            const fabPost = document.getElementById('fab-post');
            const postOptionsModal = document.getElementById('post-options-modal');
            const postPageTitle = document.getElementById('post-page-title');
            const postFormContainer = document.getElementById('post-form-container');

            // Complete Profile page elements
            const btnSaveProfile = document.getElementById('btn-save-profile');

            // Auth page elements
            const loginTitle = document.getElementById('login-title');

            // --- State ---
            let isLoggedIn = false; // Simplified login state
            let lastActivePage = 'main'; // To return to after login
            let pendingAction = null; // To perform after login
            let currentPostType = null;
            let authMode = 'login'; // 'login' or 'register'

            // --- Sample Data ---
            const sampleJobs = [
                {
                    title: 'é«˜çº§å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ',
                    company: 'æŠ€æœ¯æœ‰é™å…¬å¸',
                    location: 'ä¸Šæµ·',
                    salary: '25-45KÂ·14è–ª',
                    tags: ['React', 'TypeScript', 'Node.js', '5-10å¹´'],
                    description: 'è´Ÿè´£æ ¸å¿ƒäº§å“çš„Webå‰ç«¯æ¶æ„è®¾è®¡å’Œå¼€å‘ï¼Œæ¨åŠ¨å›¢é˜ŸæŠ€æœ¯æˆé•¿...',
                    requirements: ['è®¡ç®—æœºç›¸å…³ä¸“ä¸šæœ¬ç§‘åŠä»¥ä¸Šå­¦å†', 'äº”å¹´ä»¥ä¸Šå‰ç«¯å¼€å‘ç»éªŒ', 'ç²¾é€šReactã€Vueç­‰è‡³å°‘ä¸€ç§ä¸»æµæ¡†æ¶', 'ç†Ÿæ‚‰Node.jsï¼Œæœ‰å…¨æ ˆå¼€å‘ç»éªŒè€…ä¼˜å…ˆ']
                },
                {
                    title: 'äº§å“ç»ç†',
                    company: 'åˆ›æ„æ— é™å…¬å¸',
                    location: 'æ·±åœ³',
                    salary: '20-40K',
                    tags: ['ç”¨æˆ·ä½“éªŒ', 'å¸‚åœºåˆ†æ', '3-5å¹´'],
                    description: 'è´Ÿè´£è§„åˆ’äº§å“å‘å±•è·¯çº¿å›¾ï¼Œæ·±åº¦æŒ–æ˜ç”¨æˆ·éœ€æ±‚ï¼Œå®Œæˆäº§å“è®¾è®¡...',
                    requirements: ['3å¹´ä»¥ä¸Šäº’è”ç½‘äº§å“ç»ç†ç»éªŒ', 'ç†Ÿæ‚‰ç§»åŠ¨ç«¯äº§å“è®¾è®¡ï¼Œæœ‰æˆåŠŸæ¡ˆä¾‹', 'å…·å¤‡ä¼˜ç§€çš„æ•°æ®åˆ†æå’Œé€»è¾‘æ€ç»´èƒ½åŠ›']
                },
            ];

            const sampleTalents = [
                {
                    name: 'å¼ ä¸‰',
                    role: 'æ±‚èŒï¼šå…¨æ ˆå·¥ç¨‹å¸ˆ',
                    meta: '5å¹´ç»éªŒ Â· æœ¬ç§‘',
                    age: 28,
                    skills: ['Vue.js', 'Django', 'MySQL', 'AWS'],
                    experience: '<h4>é¡¹ç›®A (2020-è‡³ä»Š)</h4><p>æ‹…ä»»åç«¯å¼€å‘ï¼Œä½¿ç”¨Djangoå’ŒMySQLæ„å»ºäº†ä¸€ä¸ªç”µå•†åå°ç®¡ç†ç³»ç»Ÿ...</p>',
                    education: 'æ¯•ä¸šäºXXå¤§å­¦è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ä¸“ä¸š'
                },
                {
                    name: 'æå››',
                    role: 'æ±‚èŒï¼šé¡¹ç›®ç»ç†',
                    meta: '8å¹´ç»éªŒ Â· ç¡•å£«',
                    age: 32,
                    skills: ['æ•æ·å¼€å‘', 'PMP', 'å›¢é˜Ÿç®¡ç†', 'JIRA'],
                    experience: '<h4>é¡¹ç›®B (2018-2020)</h4><p>ä½œä¸ºé¡¹ç›®ç»ç†ï¼Œå¸¦é¢†20äººå›¢é˜Ÿï¼Œè´Ÿè´£æŸé‡‘èAppçš„å…¨å‘¨æœŸç®¡ç†...</p>',
                    education: 'æ¯•ä¸šäºYYå¤§å­¦è½¯ä»¶å·¥ç¨‹ä¸“ä¸š'
                },
            ];

            const samplePlazaPosts = [
                { name: 'ç‹å¸ˆå‚…', text: 'æœ¬äººæ˜¯æŒè¯ç”µå·¥ï¼Œæœ‰10å¹´ç»éªŒï¼Œå®¶è£…ã€å·¥å‚ç”¨ç”µéƒ½ç²¾é€šï¼Œæƒ³æ‰¾ä¸ªç¨³å®šæˆ–ä¸´æ—¶çš„ç”µå·¥æ´»ã€‚', tags: ['ç”µå·¥', '10å¹´ç»éªŒ'], likes: 12, comments: 4, 
                  comments_list: [
                    { user: 'æˆ‘', text: 'å¤ªæ£’äº†ï¼' },
                    { user: 'ç‹å¸ˆå‚…', text: 'æ¥¼ä¸Šçš„ï¼Œå·²ç»ç§ä¿¡ä½ äº†' },
                    { user: 'åŒ…å·¥å¤´è€åˆ˜', text: 'ç•™ä¸ªè”ç³»æ–¹å¼' },
                    { user: 'çƒ­å¿ƒå¸‚æ°‘å¼ ', text: 'å¸ˆå‚…æ‰‹è‰ºæ€ä¹ˆæ ·ï¼Ÿ' },
                  ] 
                },
                { name: 'æé˜¿å§¨', text: 'æƒ³æ‰¾ä¸€ä»½åœ¨å¿åŸä¸œåŒºçš„ä¿å§†æˆ–é’Ÿç‚¹å·¥å·¥ä½œï¼Œä¼šåšé¥­ï¼Œçˆ±å¹²å‡€ï¼Œæœ‰è€å¿ƒã€‚', tags: ['ä¿å§†', 'é’Ÿç‚¹å·¥'], likes: 25, comments: 1,
                  comments_list: [
                      { user: 'å®å¦ˆå°ä¸½', text: 'é˜¿å§¨ä½ å¥½ï¼Œæ€ä¹ˆè”ç³»ä½ ï¼Ÿ' }
                  ]
                },
                { name: 'å°å¼ ', text: 'åˆšæ¯•ä¸šçš„å¤§å­¦ç”Ÿï¼Œä¼šç”¨Officeã€PSï¼Œæƒ³æ‰¾ä¸ªæ–‡å‘˜ã€åŠ©ç†ç±»çš„å·¥ä½œï¼Œå­¦ä¹ èƒ½åŠ›å¼ºï¼Œèƒ½åƒè‹¦ã€‚', tags: ['æ–‡å‘˜', 'åº”å±Šç”Ÿ'], likes: 8, comments: 0, comments_list: [] },
            ];

            // --- Navigation Utility ---
            function showPage(pageId) {
                const currentPage = document.querySelector('.page.active');
                if(currentPage) {
                    lastActivePage = currentPage.id.replace('-page', '');
                }
                
                Object.values(pages).forEach(page => page.classList.remove('active'));
                pages[pageId].classList.add('active');

                // Toggle FAB visibility
                if (pageId === 'main') {
                    fabPost.style.display = 'block';
                } else {
                    fabPost.style.display = 'none';
                }

                // Always hide back-to-top on page switch; it reappears on scroll.
                backToTopButton.classList.remove('show');
            }

            // --- Rendering Functions ---
            function renderJobs() {
                jobsView.innerHTML = '';
                sampleJobs.forEach((job, index) => {
                    const jobCard = `
                        <div class="card" data-type="job" data-id="${index}">
                            <div class="card-header">
                                <div class="card-title">${job.title}</div>
                                <div class="card-salary">${job.salary}</div>
                            </div>
                            <div class="card-company">${job.company} Â· ${job.location}</div>
                            <div class="card-tags">
                                ${job.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                            </div>
                        </div>
                    `;
                    jobsView.innerHTML += jobCard;
                });
            }

            function renderTalents() {
                talentsView.innerHTML = '';
                sampleTalents.forEach((talent, index) => {
                    const talentCard = `
                        <div class="card" data-type="talent" data-id="${index}">
                            <div class="card-header">
                                <div class="card-title">${talent.name}</div>
                                <div class="card-salary">${talent.role}</div>
                            </div>
                            <div class="card-meta">${talent.meta}</div>
                            <div class="card-tags">
                                ${talent.skills.map(skill => `<span class="tag">${skill}</span>`).join('')}
                            </div>
                        </div>
                    `;
                    talentsView.innerHTML += talentCard;
                });
            }
            
            function renderPlaza() {
                plazaView.innerHTML = '';
                samplePlazaPosts.forEach((post, index) => {
                    const plazaCard = `
                        <div class="plaza-card" data-id="${index}">
                            <div class="name">${post.name}</div>
                            <div class="text">${post.text}</div>
                            <div class="tags">
                                ${post.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                            </div>
                            <div class="actions">
                                <button class="action-btn" data-action="like">
                                    <span class="icon">ğŸ‘</span>
                                    <span>${post.likes}</span>
                                </button>
                                <button class="action-btn" data-action="comment">
                                    <span class="icon">ğŸ’¬</span>
                                    <span>${post.comments}</span>
                                </button>
                            </div>
                            <div class="comment-container" style="display: none;"></div>
                        </div>
                    `;
                    plazaView.innerHTML += plazaCard;
                });
            }

            function renderJobDetail(jobId) {
                const job = sampleJobs[jobId];
                jobDetailContent.innerHTML = `
                    <div class="detail-card-header">
                        <div class="title">${job.title}</div>
                        <div class="salary">${job.salary}</div>
                        <div class="meta">${job.company} Â· ${job.location}</div>
                        <div class="tags">
                            ${job.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                    <div class="detail-section">
                        <h2>èŒä½æè¿°</h2>
                        <p>${job.description}</p>
                    </div>
                    <div class="detail-section">
                        <h2>ä»»èŒè¦æ±‚</h2>
                        <ul>${job.requirements.map(r => `<li>${r}</li>`).join('')}</ul>
                    </div>
                `;
            }

            function renderTalentDetail(talentId) {
                const talent = sampleTalents[talentId];
                talentDetailContent.innerHTML = `
                     <div class="detail-card-header">
                        <div class="title">${talent.name}</div>
                        <div class="salary">${talent.role}</div>
                        <div class="meta">${talent.meta}</div>
                        <div class="tags">
                             ${talent.skills.map(skill => `<span class="tag">${skill}</span>`).join('')}
                        </div>
                    </div>
                     <div class="detail-section">
                        <h2>å·¥ä½œç»å†</h2>
                        ${talent.experience}
                    </div>
                    <div class="detail-section">
                        <h2>æ•™è‚²èƒŒæ™¯</h2>
                        <p>${talent.education}</p>
                    </div>
                `;
            }

            function renderCommentsForCard(container, postId, showAll) {
                const post = samplePlazaPosts[postId];
                const commentsToShow = showAll ? post.comments_list : post.comments_list.slice(0, 3);

                let commentsHtml = commentsToShow.map(comment => `
                    <div class="comment-item-inline">
                        <span class="comment-user-inline">${comment.user}:</span>
                        <span class="comment-text-inline">${comment.text}</span>
                    </div>
                `).join('');

                if (commentsToShow.length === 0) {
                    commentsHtml = '<div>æš‚æ— è¯„è®º</div>';
                }

                let viewMoreHtml = '';
                if (!showAll && post.comments_list.length > 3) {
                    viewMoreHtml = `<button class="view-more-comments">æŸ¥çœ‹å…¨éƒ¨ ${post.comments_list.length} æ¡è¯„è®º</button>`;
                }

                const formHtml = `
                    <div class="comment-form-inline">
                        <input type="text" class="comment-inline-input" placeholder="æ·»åŠ è¯„è®º...">
                        <button class="btn-post-inline-comment">å‘å¸ƒ</button>
                    </div>
                `;

                container.innerHTML = `
                    <div class="comment-list-inline">${commentsHtml}</div>
                    ${viewMoreHtml}
                    ${formHtml}
                `;
            }

            function generatePostForm(type) {
                currentPostType = type;
                let formHtml = '';
                let title = '';

                switch (type) {
                    case 'job':
                        title = 'å‘å¸ƒæ–°æ‹›è˜';
                        formHtml = `
                            <div class="form-group"><label for="job-title">èŒä½åç§°</label><input type="text" id="job-title" placeholder="å¦‚ï¼šå‰ç«¯å·¥ç¨‹å¸ˆ"></div>
                            <div class="form-group"><label for="job-company">å…¬å¸åç§°</label><input type="text" id="job-company" placeholder="å¦‚ï¼šæŠ€æœ¯æœ‰é™å…¬å¸"></div>
                            <div class="form-group"><label for="job-salary">è–ªèµ„èŒƒå›´</label><input type="text" id="job-salary" placeholder="å¦‚ï¼š25-45KÂ·14è–ª"></div>
                            <div class="form-group"><label for="job-tags">æŠ€èƒ½è¦æ±‚ (é€—å·åˆ†éš”)</label><input type="text" id="job-tags" placeholder="å¦‚ï¼šReact,TypeScript,Node.js"></div>
                            <div class="form-group"><label for="job-desc">èŒä½æè¿°</label><textarea id="job-desc" placeholder="è¯¦ç»†æè¿°å·¥ä½œèŒè´£..."></textarea></div>
                        `;
                        break;
                    case 'plaza':
                        title = 'å‘å¸ƒæ‰¾æ´»ä¿¡æ¯';
                        formHtml = `
                            <div class="form-group"><label for="plaza-text">è¯¦ç»†è¯´æ˜</label><textarea id="plaza-text" placeholder="ä»‹ç»ä¸‹ä½ çš„æŠ€èƒ½ã€ç»éªŒå’Œæƒ³æ‰¾ä»€ä¹ˆæ ·çš„æ´»..."></textarea></div>
                            <div class="form-group"><label for="plaza-tags">æ ‡ç­¾ (é€—å·åˆ†éš”)</label><input type="text" id="plaza-tags" placeholder="å¦‚ï¼šç”µå·¥,10å¹´ç»éªŒ"></div>
                        `;
                        break;
                    case 'talent':
                        title = 'å®Œå–„æˆ‘çš„ç®€å†';
                        // Let's pre-fill the form if "æˆ‘" exists
                        const myProfile = sampleTalents.find(t => t.name === 'æˆ‘') || {};
                        formHtml = `
                            <div class="form-group"><label for="talent-name">å§“å</label><input type="text" id="talent-name" placeholder="ä½ çš„å§“å" value="${myProfile.name || 'æˆ‘'}"></div>
                            <div class="form-group"><label for="talent-age">å¹´é¾„</label><input type="number" id="talent-age" placeholder="ä½ çš„å¹´é¾„" value="${myProfile.age || ''}"></div>
                            <div class="form-group"><label for="talent-role">æœŸæœ›èŒä½</label><input type="text" id="talent-role" placeholder="å¦‚ï¼šå…¨æ ˆå·¥ç¨‹å¸ˆ" value="${myProfile.role || ''}"></div>
                            <div class="form-group"><label for="talent-meta">ä¸ªäººç®€ä»‹</label><input type="text" id="talent-meta" placeholder="å¦‚ï¼š5å¹´ç»éªŒ Â· æœ¬ç§‘" value="${myProfile.meta || ''}"></div>
                            <div class="form-group"><label for="talent-skills">æŠ€èƒ½æ ‡ç­¾ (é€—å·åˆ†éš”)</label><input type="text" id="talent-skills" placeholder="å¦‚ï¼šVue,Node.js,MySQL" value="${(myProfile.skills || []).join(',')}"></div>
                            <div class="form-group"><label for="talent-experience">å·¥ä½œç»å†</label><textarea id="talent-experience" placeholder="ä»‹ç»ä½ çš„å·¥ä½œé¡¹ç›®å’ŒèŒè´£...">${myProfile.experience || ''}</textarea></div>
                            <div class="form-group"><label for="talent-education">æ•™è‚²èƒŒæ™¯</label><textarea id="talent-education" placeholder="ä½ çš„å­¦æ ¡å’Œä¸“ä¸š...">${myProfile.education || ''}</textarea></div>
                        `;
                        break;
                }
                
                postPageTitle.textContent = title;
                // Add a submit button with a different text for talent
                if (type === 'talent') {
                    formHtml += `<button class="btn-submit">ä¿å­˜ç®€å†</button>`;
                } else {
                    formHtml += `<button class="btn-submit">ç«‹å³å‘å¸ƒ</button>`;
                }
                postFormContainer.innerHTML = formHtml;
            }

            // --- Event Listeners ---
            
            // Main list clicks (delegated)
            pages.main.addEventListener('click', (e) => {
                // If an action button inside a card was clicked, do nothing here.
                if (e.target.closest('.action-btn')) {
                    return;
                }

                const card = e.target.closest('.card, .plaza-card');
                if (!card) return;

                const id = card.dataset.id;
                const type = card.dataset.type;

                if (type === 'job') {
                    renderJobDetail(id);
                    showPage('jobDetail');
                } else if (type === 'talent') {
                    renderTalentDetail(id);
                    showPage('talentDetail');
                }
                // No action for plaza cards navigation
            });

            // Unified event listener for all actions within Plaza View
            plazaView.addEventListener('click', e => {
                const target = e.target;

                // Action: Like/Comment button on the card itself
                const actionBtn = target.closest('.action-btn');
                if (actionBtn) {
                    const card = actionBtn.closest('.plaza-card');
                    if (!card) return;
                    const postId = card.dataset.id;
                    const action = actionBtn.dataset.action;

                    if (action === 'like') {
                        const countSpan = actionBtn.querySelector('span:last-child');
                        let count = parseInt(countSpan.textContent, 10);
                        if (actionBtn.classList.toggle('liked')) {
                            countSpan.textContent = count + 1;
                        } else {
                            countSpan.textContent = count - 1;
                        }
                        return; // Exit after handling
                    }

                    if (action === 'comment') {
                        const commentContainer = card.querySelector('.comment-container');
                        if (commentContainer.style.display === 'block') {
                            commentContainer.style.display = 'none';
                        } else {
                            if (commentContainer.innerHTML === '') { // Only render if empty
                                renderCommentsForCard(commentContainer, postId, false);
                            }
                            commentContainer.style.display = 'block';
                        }
                        return; // Exit after handling
                    }
                }

                // Actions within an expanded comment container
                const card = target.closest('.plaza-card');
                if (!card) return;
                const postId = card.dataset.id;
                const commentContainer = card.querySelector('.comment-container');

                // Action: View More Comments
                if (target.classList.contains('view-more-comments')) {
                    renderCommentsForCard(commentContainer, postId, true);
                    return; // Exit after handling
                }

                // Action: Post a new comment
                if (target.classList.contains('btn-post-inline-comment')) {
                    const input = card.querySelector('.comment-inline-input');
                    const commentText = input.value.trim();
                    if (commentText === '') return;

                    const postData = samplePlazaPosts[postId];
                    const newComment = { user: 'æˆ‘', text: commentText };
                    postData.comments_list.unshift(newComment);
                    postData.comments = postData.comments_list.length;

                    // Re-render the comments section, showing all comments including the new one
                    renderCommentsForCard(commentContainer, postId, true);

                    // Update the comment count on the main action button
                    const commentCountSpan = card.querySelector('.action-btn[data-action="comment"] span:last-child');
                    if (commentCountSpan) {
                        commentCountSpan.textContent = postData.comments;
                    }
                }
            });

            // Back buttons
            document.querySelectorAll('.back-button').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetPage = e.target.dataset.target;
                    showPage(targetPage || 'main');
                });
            });

            // Tab Switching in Main App
            function showJobsView() {
                tabJobs.classList.add('active');
                tabTalents.classList.remove('active');
                tabPlaza.classList.remove('active');
                jobsView.classList.add('active');
                talentsView.classList.remove('active');
                plazaView.classList.remove('active');
            }

            function showTalentsView() {
                tabTalents.classList.add('active');
                tabJobs.classList.remove('active');
                tabPlaza.classList.remove('active');
                talentsView.classList.add('active');
                jobsView.classList.remove('active');
                plazaView.classList.remove('active');
            }

            function showPlazaView() {
                tabPlaza.classList.add('active');
                tabJobs.classList.remove('active');
                tabTalents.classList.remove('active');
                plazaView.classList.add('active');
                jobsView.classList.remove('active');
                talentsView.classList.remove('active');
            }

            tabJobs.addEventListener('click', showJobsView);
            tabTalents.addEventListener('click', showTalentsView);
            tabPlaza.addEventListener('click', showPlazaView);

            // Auth Logic
            formToggleLink.addEventListener('click', () => {
                if (authMode === 'login') {
                    authMode = 'register';
                    loginTitle.textContent = 'æ‰‹æœºå·æ³¨å†Œ';
                    btnAuthAction.textContent = 'æ³¨å†Œ';
                    loginTerms.style.display = 'none';
                    confirmPasswordGroup.style.display = 'block';
                    formToggleLink.textContent = 'å·²æœ‰è´¦æˆ·ï¼Ÿç«‹å³ç™»å½•';
                } else {
                    authMode = 'login';
                    loginTitle.textContent = 'æ‰‹æœºå·ç™»å½•';
                    btnAuthAction.textContent = 'ç™»å½•';
                    loginTerms.style.display = 'block';
                    confirmPasswordGroup.style.display = 'none';
                    formToggleLink.textContent = 'æ²¡æœ‰è´¦æˆ·ï¼Ÿç«‹å³æ³¨å†Œ';
                }
            });

            btnAuthAction.addEventListener('click', () => {
                const phone = phoneInput.value;
                const password = passwordInput.value;
                if (phone.length !== 11 || password.length < 6) {
                    alert('è¯·è¾“å…¥æœ‰æ•ˆçš„æ‰‹æœºå·å’Œè‡³å°‘6ä½çš„å¯†ç ');
                    return;
                }

                if (authMode === 'register') {
                    const confirmPassword = confirmPasswordInput.value;
                    if (password !== confirmPassword) {
                        alert('ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´');
                        return;
                    }
                    // Simulate successful registration
                    isLoggedIn = true;
                    // For new users, always force profile completion
                    showPage('completeProfile');
                } else { // Login mode
                    // Simulate successful login
                    isLoggedIn = true;
                    alert('ç™»å½•æˆåŠŸï¼');
                    // For existing users, check for pending actions or go back
                    if (pendingAction === 'showPostOptions') {
                        postOptionsModal.classList.add('show');
                        pendingAction = null;
                    } else if (lastActivePage && lastActivePage !== 'login') {
                        showPage(lastActivePage);
                    } else {
                        showPage('main');
                    }
                }
            });

            // Complete Profile Logic
            btnSaveProfile.addEventListener('click', () => {
                const profileName = document.getElementById('profile-name').value;

                if (!profileName) {
                    alert('è¯·å¡«å†™æ˜µç§°');
                    return;
                }
                
                // Simulate saving profile data
                console.log('Profile Saved:', { name: profileName });

                alert('ä¿¡æ¯å®Œå–„æˆåŠŸï¼');

                // After completing profile, go to where they originally wanted to go
                if (pendingAction === 'showPostOptions') {
                    postOptionsModal.classList.add('show');
                    pendingAction = null;
                } else if (lastActivePage && lastActivePage !== 'login' && lastActivePage !== 'completeProfile') {
                    showPage(lastActivePage);
                } else {
                    showPage('main');
                }
            });

            // Back to Top Logic
            document.querySelectorAll('.page main').forEach(mainEl => {
                mainEl.addEventListener('scroll', () => {
                    if (mainEl.scrollTop > 200) {
                        backToTopButton.classList.add('show');
                    } else {
                        backToTopButton.classList.remove('show');
                    }
                });
            });

            backToTopButton.addEventListener('click', () => {
                const activeMain = document.querySelector('.page.active main');
                if (activeMain) {
                    activeMain.scrollTo({ top: 0, behavior: 'smooth' });
                }
            });

            // Post Feature Logic
            fabPost.addEventListener('click', () => {
                if (isLoggedIn) {
                    postOptionsModal.classList.add('show');
                } else {
                    pendingAction = 'showPostOptions';
                    showPage('login');
                }
            });

            postOptionsModal.addEventListener('click', (e) => {
                const button = e.target.closest('button');
                // If click is on the overlay (but not on a button), hide the modal
                if (e.target === postOptionsModal) {
                    postOptionsModal.classList.remove('show');
                    return;
                }

                if (!button) return; // Ignore clicks inside action sheet that are not on buttons

                const postType = button.dataset.postType;

                if (postType) {
                    generatePostForm(postType);
                    showPage('post');
                }
                
                // Always hide modal after any button action (including cancel)
                postOptionsModal.classList.remove('show');
            });
            
            postFormContainer.addEventListener('click', (e) => {
                if (!e.target.classList.contains('btn-submit')) return;

                e.preventDefault(); // Prevent potential form submission
                
                switch(currentPostType) {
                    case 'job':
                        const newJob = {
                            title: document.getElementById('job-title').value || 'æœªå¡«å†™èŒä½',
                            company: document.getElementById('job-company').value || 'æœªå¡«å†™å…¬å¸',
                            location: 'æœ¬åœ°',
                            salary: document.getElementById('job-salary').value || 'é¢è®®',
                            tags: (document.getElementById('job-tags').value || '').split(',').map(t => t.trim()),
                            description: document.getElementById('job-desc').value || 'æš‚æ— æè¿°',
                            requirements: []
                        };
                        sampleJobs.unshift(newJob);
                        renderJobs();
                        showJobsView();
                        break;
                    case 'plaza':
                         const newPlaza = {
                            name: 'æˆ‘',
                            text: document.getElementById('plaza-text').value || 'æœªå¡«å†™å†…å®¹',
                            tags: (document.getElementById('plaza-tags').value || '').split(',').map(t => t.trim()),
                            likes: 0,
                            comments: 0,
                            comments_list: []
                        };
                        samplePlazaPosts.unshift(newPlaza);
                        renderPlaza();
                        showPlazaView();
                        break;
                    case 'talent':
                        const newTalentData = {
                            name: document.getElementById('talent-name').value || 'æˆ‘',
                            age: document.getElementById('talent-age').value || null,
                            role: document.getElementById('talent-role').value || 'æœªå¡«å†™',
                            meta: document.getElementById('talent-meta').value || 'æœªå¡«å†™',
                            skills: (document.getElementById('talent-skills').value || '').split(',').filter(t => t).map(t => t.trim()),
                            experience: document.getElementById('talent-experience').value || 'æš‚æ— ç»å†',
                            education: document.getElementById('talent-education').value || 'æš‚æ— æ•™è‚²ä¿¡æ¯'
                        };
                        
                        const existingTalentIndex = sampleTalents.findIndex(t => t.name === 'æˆ‘');
                        if (existingTalentIndex !== -1) {
                            // Update existing profile
                            sampleTalents[existingTalentIndex] = newTalentData;
                        } else {
                            // Add new profile
                            sampleTalents.unshift(newTalentData);
                        }

                        renderTalents();
                        showPage('main');
                        showTalentsView(); // Switch to the talent tab
                        alert('ç®€å†ä¿å­˜æˆåŠŸï¼');
                        return; // Exit here to avoid the generic success alert
                }
                
                alert('å‘å¸ƒæˆåŠŸï¼');
                showPage('main');
            });

            // --- Initial Setup ---
            function init() {
                renderJobs();
                renderTalents();
                renderPlaza();
                showJobsView();
                // Start on the main page
                pages.main.classList.add('active');
                fabPost.style.display = 'block'; // Show FAB on initial load

                // Back to Top Logic
                document.querySelectorAll('.page main').forEach(mainEl => {
                    mainEl.addEventListener('scroll', () => {
                        if (mainEl.scrollTop > 200) {
                            backToTopButton.classList.add('show');
                        } else {
                            backToTopButton.classList.remove('show');
                        }
                    });
                });
            }

            init();
        });
    </script>

</body>
</html> 